id: users
label: 'Users'
migration_group: custom_migration
source:
  plugin: url
  data_fetcher_plugin: http
  urls:
    - 'https://jsonplaceholder.typicode.com/users'
  fields:
    - id: id
    - name: name
    - email: email
    - username: username
    - phone: phone
    - company_id: company.name
process:
  uid:
    plugin: skip_on_empty
    method: "email"
  name: name
  mail: email
  field_username: username
  field_phone: phone
  field_company:
    plugin: entity_lookup
    source: company_id
    entity_type: node
    bundle: company
destination:
  plugin: entity:user
